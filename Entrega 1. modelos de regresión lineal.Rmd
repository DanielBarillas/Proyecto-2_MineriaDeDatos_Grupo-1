---
title: "Entrega 1. Modelos de regresión lineal"
author: 
  - "Pablo Daniel Barillas Moreno, Carné No. 22193"
  - "Mathew Cordero Aquino, Carné No. 22982"
output:
  pdf_document: default
  html_document: default
date: "2025-02-02"
header-includes:
   - \usepackage{fvextra}
   - \DefineVerbatimEnvironment{Highlighting}{Verbatim}{breaklines,commandchars=\\\{\}}
repository: "https://github.com/DanielBarillas/Proyecto-2_MineriaDeDatos_Grupo-1.git"
---

### Enlace al Repositorio del Grupo #1
[Repositorio en GitHub](https://github.com/DanielBarillas/Proyecto-2_MineriaDeDatos_Grupo-1.git)

### 1.	Descargue los conjuntos de datos. 

```{r setup, include=FALSE}
train_data <- read.csv("house_prices_data/train.csv", stringsAsFactors = FALSE)
test_data <- read.csv("house_prices_data/test.csv", stringsAsFactors = FALSE)

head(train_data)   # Muestra las primeras filas
str(train_data)    # Muestra la estructura del dataset
summary(train_data) # Resumen estadístico
```

### 2. Haga un análisis exploratorio extenso de los datos. Explique bien todos los hallazgos. No ponga solo gráficas y código. Debe llegar a conclusiones interesantes para poder predecir. Explique el preprocesamiento que necesitó hacer.

Análisis Exploratorio de Datos (EDA)

El objetivo de este análisis es entender la estructura de los datos, identificar patrones, detectar valores atípicos y preparar el dataset para su uso en modelos de regresión. Vamos a explorar el conjunto de datos train.csv.

1. Cargar y Revisar los Datos...

Primero, cargamos los datos y revisamos su estructura.

```{r}
# Cargar paquetes necesarios
library(tidyverse)

# Leer los datos
train_data <- read.csv("house_prices_data/train.csv", stringsAsFactors = FALSE)

# Revisar las primeras filas
head(train_data)

# Resumen general de los datos
str(train_data)
summary(train_data)
```

Observaciones iniciales

- El dataset contiene 81 columnas (80 variables predictoras + 1 variable objetivo SalePrice).
- Hay variables numéricas (ejemplo: LotArea, GrLivArea) y categóricas (Neighborhood, HouseStyle).
- Algunas variables tienen valores NA, lo que requerirá preprocesamiento.

2. nálisis de la Variable Objetivo: SalePrice

La variable SalePrice representa el precio de venta de las casas. Analicemos su distribución.

```{r}
# Distribución de precios de las casas
ggplot(train_data, aes(x = SalePrice)) +
  geom_histogram(bins = 50, fill = "blue", alpha = 0.7) +
  labs(title = "Distribución de los Precios de Venta", x = "Precio", y = "Frecuencia")
```

Hallazgos

- La distribución es sesgada hacia la derecha, lo que indica que hay casas con precios extremadamente altos.
- Posibles valores atípicos en precios muy elevados que podrían afectar el modelo.
- Será útil aplicar una transformación logarítmica para normalizar la distribución.

```{r}
# Transformación logarítmica
ggplot(train_data, aes(x = log(SalePrice))) +
  geom_histogram(bins = 50, fill = "blue", alpha = 0.7) +
  labs(title = "Distribución Logarítmica de los Precios", x = "Log(Precio)", y = "Frecuencia")
```
3.  Valores Faltantes

Antes de construir un modelo, es importante manejar los valores NA.

```{r}
# Contar valores faltantes por columna
na_counts <- colSums(is.na(train_data))
na_counts <- na_counts[na_counts > 0]
na_counts
```
Hallazgos

Hay varias variables con valores faltantes. Las más problemáticas incluyen:
- PoolQC (Calidad de la piscina) → Muchos NA porque pocas casas tienen piscina.
- Alley (Tipo de calle trasera) → Muchos NA, probablemente porque la mayoría de casas no tienen.
- FireplaceQu (Calidad de la chimenea) → Muchos NA porque no todas las casas tienen chimenea.
- LotFrontage (Metros de frente del terreno) → Algunos valores faltantes que podrían imputarse con la mediana.

Solución:

Para algunas variables (PoolQC, Alley, FireplaceQu), podemos rellenar los NA con "None" (indica que la casa no tiene esa característica).
Para valores numéricos como LotFrontage, se puede imputar con la mediana del vecindario.

```{r}
# Rellenar valores NA para variables categóricas
train_data$PoolQC[is.na(train_data$PoolQC)] <- "None"
train_data$Alley[is.na(train_data$Alley)] <- "None"
train_data$FireplaceQu[is.na(train_data$FireplaceQu)] <- "None"

# Imputar LotFrontage con la mediana por vecindario
train_data$LotFrontage[is.na(train_data$LotFrontage)] <- median(train_data$LotFrontage, na.rm = TRUE)
```

4.  Relación entre Variables y SalePrice

Para entender qué variables influyen más en el precio de las casas, veamos la correlación de variables numéricas.

```{r}
# Seleccionar solo variables numéricas
numeric_vars <- train_data %>% select_if(is.numeric)

# Matriz de correlación
cor_matrix <- cor(numeric_vars, use = "complete.obs")

# Ordenar correlaciones con SalePrice
cor_with_price <- sort(cor_matrix["SalePrice",], decreasing = TRUE)
cor_with_price
```

Hallazgos

Las variables con mayor correlación positiva con el precio de las casas son:

- OverallQual (Calidad general de la casa) → 0.79 
- GrLivArea (Área habitable sobre el suelo) → 0.71 
- GarageCars (Número de coches en el garaje) → 0.64 
- TotalBsmtSF (Área total del sótano) → 0.61 

Esto sugiere que casas más grandes y con mejor calidad tienden a ser más caras.

Visualización

```{r}
ggplot(train_data, aes(x = OverallQual, y = SalePrice)) +
  geom_boxplot(aes(group = OverallQual, fill = as.factor(OverallQual))) +
  labs(title = "Precio vs Calidad General", x = "Calidad", y = "Precio")
```
Conclusión: La calidad (OverallQual) es una variable crucial para predecir SalePrice.

5. Detectar Valores Atípicos

Para evitar que valores extremos afecten el modelo, busquemos outliers.

```{r}
ggplot(train_data, aes(x = GrLivArea, y = SalePrice)) +
  geom_point(alpha = 0.5) +
  geom_smooth(method = "lm", col = "red") +
  labs(title = "Área vs Precio", x = "Área habitable", y = "Precio")
```
Hallazgos

- Se observan dos puntos con GrLivArea > 4000 y precios muy bajos.
- Estas casas son atípicas y podrían eliminarse para mejorar la predicción.

```{r}
# Eliminar outliers
train_data <- train_data[train_data$GrLivArea < 4000, ]
```

Conclusiones del Análisis Exploratorio

1. La distribución de SalePrice está sesgada, por lo que podemos usar logaritmos para mejorar el modelo.

2.  Las variables más importantes para predecir el precio son:

- OverallQual (Calidad general de la casa)
- GrLivArea (Área habitable)
- GarageCars (Cantidad de autos en garaje)
- TotalBsmtSF (Área del sótano)

3. Hay valores faltantes, principalmente en características poco comunes como piscinas y chimeneas.

4. Existen valores atípicos en GrLivArea que afectan el análisis y deben eliminarse.